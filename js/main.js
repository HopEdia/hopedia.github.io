function loadPage(){switch(unload(),args=getUrlArgs(),args.shift()){case void 0:requirejs(["js/index"],function(e){e(args)});break;case"account":requirejs(["js/account/main"],function(e){e(args)});break;case"donation":requirejs(["js/donation"],function(e){e(args)});break;case"beer":requirejs(["js/beer"],function(e){e(args[0])})}}function getUrlArgs(){return page=window.location.href.split("#")[1],void 0===page&&(page=window.location.href.split("?")[1]),void 0===page?[void 0]:page.split("/")}function post(e,n,t){var i=new XMLHttpRequest;i.open("POST",apiUrl+n),i.setRequestHeader("Content-Type","application/json;charset=UTF-8"),i.onreadystatechange=function(e){i.readyState===XMLHttpRequest.DONE&&200===i.status&&t(JSON.parse(i.responseText))},i.send(JSON.stringify(e))}function setContent(e){spinner.style.display="none",document.getElementById("main-content").innerHTML=e}function unload(){document.getElementById("main-content").innerHTML=null,spinner.style.display="table"}define("js/beer",[],function(){var e;return function(n){function t(n){var t=document.createElement("div"),i=(document.createElement("h3"),document.createElement("p"));i.innerHTML=n.remark,t.appendChild(i),e.appendChild(comment)}function i(e,t){if(void 0!==n[e]&&n[e].length>0){var i=document.createElement("tr"),r=document.createElement("td"),o=document.createElement("td");r.innerHTML=e,o.innerHTML=n[e][0]._value,i.appendChild(r),i.appendChild(o),t.appendChild(i)}}requirejs(["text!html/beer.html"],function(r){setContent(r);var o=document.getElementById("beer_properties");e=document.getElementById("beer_reviews"),i("abv",o),i("ibu",o);for(var a=0,c=n.reviews.length;c>a;a++)t(n.reviews[a])})}}),define("js/index",[],function(){return function(e){requirejs(["text!html/index.html"],function(e){setContent(e)})}}),define("js/account/main",[],function(){return function(e){switch(e.shift()){case"validation":requirejs(["js/account/validation"],function(n){n(e)})}}}),define("js/donation",[],function(){return function(e){requirejs(["text!html/donation.html"],function(e){setContent(e);var n,t=document.getElementById("flattr");n=document.createElement("iframe"),n.src="//button.flattr.com/view/?fid=g3o9e0&url="+encodeURIComponent(document.URL),n.title="Flattr",n.height=62,n.width=55,n.style.borderWidth=0,t.parentNode.insertBefore(n,t)})}});var apiUrl="https://server01-hopedia.rhcloud.com/",main=document.getElementById("main-content");require.config({paths:{text:"lib/text/text"},baseUrl:"./"});var spinner,searchField=document.getElementById("search");spinner=document.getElementById("spinner_table"),loadPage(),window.onhashchange=loadPage,searchField.addEventListener("keyup",function(e){e.preventDefault(),13===e.keyCode&&post({name:searchField.value},"beerJSON",function(e){1===e.length&&requirejs(["js/beer"],function(n){n(e[0]),location.href="#beer/"+e[0]._id})})}),define("js/main",function(){});